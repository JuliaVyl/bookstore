(this.webpackJsonpbookstore=this.webpackJsonpbookstore||[]).push([[0],{41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},56:function(e,t,c){"use strict";c.r(t);var r=c(1),a=c(2),o=c(18),n=c.n(o),s=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,58)).then((function(t){var c=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,n=t.getTTFB;c(e),r(e),a(e),o(e),n(e)}))},i=c(3),l=c(9),u=c.n(l),b=c(15),j="FETCH_BOOKS_REQUEST",d="FETCH_BOOKS_SUCCESS",m="FETCH_BOOKS_FAILURE",O="BOOK_DELETED_FROM_CART",_="BOOK_ADDED_TO_CART",h="CART_LOADED_FROM_STORAGE",f="FILTER_BOOKS_BY_TEXT",p="FILTER_BOOKS_BY_CATEGORY",v="FETCH_ORDER_REQUEST",x="FETCH_ORDER_SUCCESS",A="FETCH_ORDER_FAILURE",k="CLEAN_CART",N="CLEAN_ORDER_DATA",g=function(e){return{type:_,payload:e}},E=function(e){return{type:p,payload:e}},C=function(e){return{type:f,payload:e}},y=(c(41),["All","Bestsellers","Art & Fashion","Fiction & Poetry","Children's","Education","Food & Drink"]),S=function(){var e="categories__list-item",t=Object(i.c)((function(e){return e.books.filterCategory})),c=Object(i.b)(),a=function(c){return t===c?"categories__list-item categories__list-item_active":e};return Object(r.jsx)("div",{className:"categories",id:"books",children:Object(r.jsx)("ul",{className:"categories__list",children:y.map((function(e){return Object(r.jsx)("p",{className:a(e),onClick:function(){return c(E(e)),void c(C(""))},children:e},e)}))})})},I=new a.createContext,w=c.p+"static/media/error.1e04c601.png",R=(c(42),function(){return Object(r.jsxs)("div",{className:"error",children:[Object(r.jsx)("img",{className:"error__pic",src:w,alt:"error"}),Object(r.jsx)("h1",{className:"error__oops",children:"Opps!"}),Object(r.jsx)("h2",{className:"error__text",children:"Something went wrong..."})]})}),T=(c(43),function(){return Object(r.jsx)("div",{className:"spinner",children:Object(r.jsxs)("div",{className:"lds-facebook",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})})}),D=c(10),B=(c(44),function(e){return Object(r.jsxs)("div",{className:"more",children:[Object(r.jsx)("button",{className:"more__close",onClick:e.closeBookMore,children:"X"}),Object(r.jsxs)("div",{className:"more__container",children:[Object(r.jsx)("div",{className:"more__image",children:Object(r.jsx)("img",{className:"more__image-pic",src:e.book.coverImage,alt:e.book.title})}),Object(r.jsxs)("div",{className:"more__about",children:[Object(r.jsx)("div",{className:"more__author",children:e.book.author}),Object(r.jsx)("div",{className:"more__title",children:e.book.title}),Object(r.jsx)("div",{className:"more__description",children:e.book.fullDesc}),Object(r.jsxs)("div",{className:"more__cost",children:["$",e.book.price]})]})]})]})}),F=(c(45),function(e){var t=Object(a.useState)(!1),c=Object(D.a)(t,2),o=c[0],n=c[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"books-list__book-card",children:[Object(r.jsx)("div",{className:"book-card__image",children:Object(r.jsx)("img",{className:"book-card__image-pic",src:e.book.coverImage,alt:e.book.title})}),Object(r.jsxs)("div",{className:"book-card__about",children:[Object(r.jsxs)("div",{className:"book-card__about-info",helper:"Click here to learn more abouit it",onClick:function(){return n(!0)},children:[Object(r.jsx)("div",{className:"about__author",children:e.book.author}),Object(r.jsx)("div",{className:"about__title",children:e.book.title}),Object(r.jsx)("div",{className:"about__description",children:e.book.shortDesc}),Object(r.jsxs)("div",{className:"about__cost",children:["$",e.book.price]})]}),Object(r.jsx)("button",{className:"about__buy-btn",onClick:e.onAddedToCart,children:"add to cart"})]})]}),o&&Object(r.jsx)(B,{book:e.book,closeBookMore:function(){return n(!1)}})]})}),L=(c(46),function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.books.books})),c=Object(i.c)((function(e){return e.books.loading})),o=Object(i.c)((function(e){return e.books.error})),n=Object(a.useContext)(I),s=Object(i.c)((function(e){return e.books.filterText})),l=Object(i.c)((function(e){return e.books.filterCategory}));return t=Object(a.useMemo)((function(){return""===s?t:t.filter((function(e){return e.author.trim().toLowerCase().includes(s)||e.title.trim().toLowerCase().includes(s)}))}),[t,s]),t=Object(a.useMemo)((function(){return"All"===l?t:t.filter((function(e){return"Bestsellers"===l?e.bestseller:e.category===l}))}),[t,l]),Object(a.useEffect)((function(){var t;e((t=n,function(){var e=Object(b.a)(u.a.mark((function e(c){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:j}),e.next=4,t.getBooks();case 4:r=e.sent,c({type:d,payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c((a=e.t0,{type:m,payload:a}));case 11:case"end":return e.stop()}var a}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}),[e,n]),Object(r.jsxs)("div",{className:"books-list",children:[c&&Object(r.jsx)(T,{}),o&&Object(r.jsx)(R,{}),!t.length&&Object(r.jsx)("p",{className:"no-books",children:"No books were found"}),t.map((function(t){return Object(r.jsx)(F,{onAddedToCart:function(){return e(g(t.id))},book:t},t.id)}))]})}),K=(c(47),function(){return Object(r.jsx)("div",{className:"books",children:Object(r.jsxs)("div",{className:"books__wrapper",children:[Object(r.jsx)(S,{}),Object(r.jsx)(L,{})]})})}),U=(c(48),function(){return Object(r.jsx)("div",{className:"footer",id:"about",children:Object(r.jsxs)("div",{className:"footer__wrapper",children:[Object(r.jsx)("div",{className:"footer__logo",children:"Bookstore"}),Object(r.jsxs)("div",{className:"footer__email",children:[Object(r.jsx)("p",{className:"footer__email-text",children:"Charity your old books"}),Object(r.jsx)("a",{className:"footer__email-link",href:"mailto:julia.vyl@gmail.com",children:"Click here"})]}),Object(r.jsxs)("div",{className:"footer__contacts",children:[Object(r.jsx)("a",{className:"footer__contacts-links",href:"#!",children:"github"}),Object(r.jsx)("a",{className:"footer__contacts-links",href:"https://www.instagram.com/julvyl/",children:"instagram"})]})]})})}),Y=(c(49),c.p+"static/media/banner.2a69258d.jpg"),J=function(){var e=Object(i.b)();return Object(r.jsx)("div",{className:"home",id:"home",children:Object(r.jsxs)("div",{className:"home__wrapper",children:[Object(r.jsx)("img",{className:"home__bg",src:Y,alt:"home-page"}),Object(r.jsx)("div",{className:"home__logo",children:"Bookstore"}),Object(r.jsx)("a",{href:"#about",className:"home__first-promo",children:Object(r.jsx)("div",{className:"home__first-promo-text promo-text",children:"Charity your old books"})}),Object(r.jsx)("a",{href:"#books",className:"home__second-promo",onClick:function(){return e(E("Bestsellers"))},children:Object(r.jsx)("div",{className:"home__second-promo-text promo-text",children:"top books 2020"})})]})})},M=(c(50),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAARCAYAAADtyJ2fAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEgSURBVHgBnZKxTsMwEIbvvwZ1DRtDoe4GYUkHpIapr8CTAE/Q8gY8Am/AI8BE2WChYrREB7YGobIk8XGWCkKRSpz+km3Zvs/338mgmnrJ6RSQcxGK/R6gXJebt5fZ5d84rkHXAup/rrqDxXwGP4pKho5ot5eMJrRJ+8fZcu9wZOrnJh3HvSRbbgT1UkLvmLYU/HRwlF0I0+SnIQ3I1WL+MIXRmgrG3eqrO8ztff4f4uvf6eApcki5jMhAxDZBXu+vj1YLfS5EDANQe9II/RrVJNLxYOn6wmyppdhpRn0lOKNatRBaW20BssaKMqxQLIxgsAI+FI5ZaYMKNhQEkxVvlVoqcry2qhKWQSjoRMa+mTDJSVpQdKt/z4SAvqtE5dk38Sp5EeUGzW0AAAAASUVORK5CYII="),X=c(26),V=(c(51),c.p+"static/media/sucsess-order.796e0fb9.gif"),H=function(e){return Object(r.jsxs)("div",{className:"order-complete",children:[Object(r.jsx)("img",{className:"order-complete__icon",src:V,alt:"done-icon"}),Object(r.jsx)("div",{className:"order-complete__text",children:"Your order #".concat(e.data," is complete")})]})},Q=(c(52),function(e){var t,c=e.closeCart,o=Object(i.c)((function(e){return e.cart.cartItems})),n=Object(i.c)((function(e){return e.checkout.data})),s=Object(i.c)((function(e){return e.checkout.loading})),l=Object(i.c)((function(e){return e.checkout.error})),j=Object(i.b)(),d=Object(a.useContext)(I),m=Object(a.useState)(""),_=Object(D.a)(m,2),h=_[0],f=_[1],p=0,E=Object(X.a)(o);try{for(E.s();!(t=E.n()).done;){var C=t.value;p=(C.amount*C.price+parseFloat(p)).toFixed(2)}}catch(y){E.e(y)}finally{E.f()}Object(a.useEffect)((function(){return function(){return j({type:N})}}),[j]);return Object(r.jsx)("div",{className:"cart",children:Object(r.jsxs)("div",{className:"cart__body",children:[Object(r.jsxs)("div",{className:"cart__header",children:[Object(r.jsx)("div",{className:"cart__title",children:"Order"}),Object(r.jsx)("p",{className:"cart__close",onClick:c,children:"x"})]}),0===p&&Object(r.jsx)("p",{className:"cart__empty",children:"Your cart is empty"}),p>0&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"cart__books",children:o.map((function(e){return Object(r.jsxs)("div",{className:"cart__book",children:[Object(r.jsxs)("div",{className:"cart__book_left-side",children:[Object(r.jsx)("img",{className:"cart__book-pic",src:e.coverImage,alt:e.title}),Object(r.jsxs)("div",{className:"cart__book-about",children:[Object(r.jsx)("div",{className:"cart__book-title",children:e.title}),Object(r.jsx)("div",{className:"cart__book-author",children:e.author})]})]}),Object(r.jsx)("div",{className:"cart__book_right-side",children:Object(r.jsxs)("div",{className:"cart__book-info",children:[Object(r.jsx)("button",{className:"cart__info-minus",onClick:function(){return j((t=e.id,{type:O,payload:t}));var t},children:"-"}),Object(r.jsx)("div",{className:"cart__info-amount",children:e.amount}),Object(r.jsx)("button",{className:"cart__info-add",onClick:function(){return j(g(e.id))},children:"+"}),Object(r.jsxs)("div",{className:"cart__info-cost",children:["$",(e.price*e.amount).toFixed(2)]})]})})]},e.id)}))}),Object(r.jsxs)("div",{className:"cart__total-sum",children:["Total: $",p]}),Object(r.jsxs)("div",{className:"cart__order",children:[Object(r.jsx)("p",{className:"cart__order-text",children:"To place your order submit this form:"}),Object(r.jsxs)("form",{className:"cart__order-form",onSubmit:function(e){var t;e.preventDefault(),j((t=d,function(){var e=Object(b.a)(u.a.mark((function e(c){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:v}),e.next=4,t.makeOrder();case 4:r=e.sent,c({type:x,payload:r}),c({type:k}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c((a=e.t0,{type:A,payload:a}));case 12:case"end":return e.stop()}var a}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),f("")},children:[Object(r.jsx)("input",{className:"cart__order-email",type:"email",placeholder:"Enter your email",value:h,onChange:function(e){e.preventDefault(),f(e.target.value)},required:!0}),Object(r.jsx)("button",{type:"submit",className:"cart__order-buy",children:"Buy"})]}),s&&Object(r.jsx)(T,{}),l&&Object(r.jsx)(R,{})]})]}),"success"===n.status&&Object(r.jsx)(H,{data:n.orderId})]})})}),G=(c(53),function(e){var t=e.closeSearchPannel,c=Object(a.useState)(""),o=Object(D.a)(c,2),n=o[0],s=o[1],l=Object(i.b)();return Object(r.jsxs)("div",{className:"search-pannel",children:[Object(r.jsxs)("form",{className:"search-pannel__form",onSubmit:function(e){e.preventDefault(),l(C(n)),s("")},children:[Object(r.jsx)("input",{className:"search-pannel__input-field",type:"search",placeholder:"Write titles or authors of books",value:n,onChange:function(e){s(e.target.value)}}),Object(r.jsx)("button",{className:"search-pannel__btn",children:"Search"})]}),Object(r.jsx)("button",{className:"search-pannel__close",onClick:t,children:"X"})]})}),W=function(){var e=Object(a.useState)(!1),t=Object(D.a)(e,2),c=t[0],o=t[1],n=Object(a.useState)(!1),s=Object(D.a)(n,2),l=s[0],u=s[1],b=Object(i.c)((function(e){return e.cart.cartItems})),j=Object(i.b)();Object(a.useEffect)((function(){var e,t=localStorage.getItem("cart");t&&j((e=JSON.parse(t),{type:h,payload:e}))}),[j]),Object(a.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(b))}),[b]);var d=!!b.length;return Object(r.jsxs)("nav",{className:"navbar",children:[Object(r.jsx)("div",{className:"navbar__logo",children:"Bookstore"}),Object(r.jsxs)("div",{className:"navbar__items",children:[Object(r.jsx)("a",{href:"#home",className:"navbar__link navbar__link_active home",children:"home"}),Object(r.jsx)("a",{href:"#books",className:"navbar__link",children:"books"}),Object(r.jsx)("a",{href:"#about",className:"navbar__link",children:"about us"})]}),Object(r.jsxs)("div",{className:"navbar__icons",children:[Object(r.jsx)("div",{className:"navbar__search-icon",children:Object(r.jsx)("img",{className:"navbar__search-icon-pic",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF+SURBVHgBlVKxTgJBEJ1ZREIwcsSIJh7mjA1BTbQDG+8P9A8sLYEvEL/A4wuQT7C08mjEkkZCJwlXiYkrhgght+OcCcdJiMArdpLd92bmzSxCAPph1gSFeUQwiUDjKDnaoKjstJ5tmILwhZlTixRWgJT91Y/sOc06jlw6IUX3JLCSOsjdTovRFyLE+/3VomzbcppkHJvaaDS0uNJH56Ve/NPqTib3qhmmBv/AS+Dx9DRbG7eN7JE9lWZVDKLdsGWIlAVI+YlnHo4LUIMFICLRKqAwJ21ncgRLIMgX3jrm+R3DSGcNDr49AbzHtej35SJiV4DprdIXk6AyoijMnfbvO14DCWt8F+q9Oe14MmWEw+oiFNuvDWR7MEs4ig0t7hKcVv3GF3tHr+s8aEndjIRdi6NMbOif8t2Rnmhd37pSK+qOP1GDqdn45m6i1+3Yng6DFfSj3Bm6UGAiewONXyXyTEiBxRVr2zywkMBHBKw6zacSwpIIJlhaPE6wgnT+A1eImW7VO01TAAAAAElFTkSuQmCC",alt:"Search",onClick:function(){return u(!0)}})}),Object(r.jsxs)("div",{className:"navbar__cart-icon",children:[d&&Object(r.jsx)("img",{className:"navbar__cart-icon-pic-full",src:M,alt:"Cart",onClick:function(){return o(!0)}}),!d&&Object(r.jsx)("img",{className:"navbar__cart-icon-pic",src:M,alt:"Cart",onClick:function(){return o(!0)}})]})]}),c&&Object(r.jsx)(Q,{closeCart:function(){return o(!1)}}),l&&Object(r.jsx)(G,{closeSearchPannel:function(){return u(!1)}})]})};var P=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(W,{}),Object(r.jsx)(J,{}),Object(r.jsx)(K,{}),Object(r.jsx)(U,{})]})},q=c(14),Z=c(6),z=function(e,t){if(void 0===e)return{books:[],filterText:"",filterCategory:"All",loading:!0,error:null};switch(t.type){case j:return Object(Z.a)(Object(Z.a)({},e.books),{},{books:[],loading:!0,error:null});case d:return Object(Z.a)(Object(Z.a)({},e.books),{},{books:t.payload,loading:!1,error:null});case m:return Object(Z.a)(Object(Z.a)({},e.books),{},{books:[],loading:!1,error:t.payload});case f:var c=t.payload.trim().toLowerCase();return Object(Z.a)(Object(Z.a)({},e.books),{},{filterText:c});case p:var r=t.payload;return Object(Z.a)(Object(Z.a)({},e.books),{},{filterCategory:r});default:return e.books}},$=function(e,t){if(void 0===e)return{data:[],loading:!1,error:null};switch(t.type){case v:return{data:[],loading:!0,error:null};case x:return{data:t.payload,loading:!1,error:null};case A:return{data:[],loading:!1,error:t.payload};case N:return{data:[],loading:!1,error:null};default:return e.checkout}},ee=c(16),te=function(e,t,c){return 0===t.amount?[].concat(Object(ee.a)(e.slice(0,c)),Object(ee.a)(e.slice(c+1))):-1===c?[].concat(Object(ee.a)(e),[t]):[].concat(Object(ee.a)(e.slice(0,c)),[t],Object(ee.a)(e.slice(c+1)))},ce=function(e,t,c){var r=e.books.books,a=e.cart.cartItems,o=r.find((function(e){return e.id===t})),n=a.findIndex((function(e){return e.id===t})),s=function(e,t,c){return t?Object(Z.a)(Object(Z.a)({},t),{},{amount:t.amount+c}):{id:e.id,title:e.title,author:e.author,price:e.price,coverImage:e.coverImage,amount:1}}(o,a[n],c);return{cartItems:te(a,s,n)}},re=function(e,t){if(void 0===e)return{cartItems:[]};switch(t.type){case _:return ce(e,t.payload,1);case O:return ce(e,t.payload,-1);case h:return{cartItems:t.payload};case k:return{cartItems:[]};default:return e.cart}},ae=c(27),oe=window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e},ne=Object(q.d)((function(e,t){return{books:z(e,t),cart:re(e,t),checkout:$(e,t)}}),Object(q.c)(Object(q.a)(ae.a),oe)),se=(c(54),c(19));var ie=c(28),le=c(29),ue=(c(57),function(){function e(){Object(ie.a)(this,e),this.db=se.a.firestore()}return Object(le.a)(e,[{key:"getBooks",value:function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.collection("books").get();case 3:if(!(t=e.sent).empty){e.next=6;break}return e.abrupt("return",[]);case 6:return c=[],t.forEach((function(e){c.push(Object(Z.a)({id:e.id},e.data()))})),e.abrupt("return",c);case 11:throw e.prev=11,e.t0=e.catch(0),new Error("api error");case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"makeOrder",value:function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:"success",orderId:Math.floor(8999*Math.random())+1e3});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}());!function(){var e={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/bookstore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).FIREBASE_API_KEY,authDomain:"bookstore-web-1820c.firebaseapp.com",projectId:"bookstore-web-1820c",storageBucket:"bookstore-web-1820c.appspot.com",messagingSenderId:"602679837378",appId:"1:602679837378:web:f789de0544c07cf421b15b",measurementId:"G-YBVDB3K57Q"};se.a.initializeApp(e)}();var be=new ue;n.a.render(Object(r.jsx)(i.a,{store:ne,children:Object(r.jsx)(I.Provider,{value:be,children:Object(r.jsx)(P,{})})}),document.getElementById("root")),s()}},[[56,1,2]]]);
//# sourceMappingURL=main.c66a6e43.chunk.js.map